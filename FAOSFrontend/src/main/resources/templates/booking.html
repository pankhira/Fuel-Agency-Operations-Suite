<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Profile - FAOS</title>
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/components/header.css" />
    <link rel="stylesheet" href="/css/components/forms.css" />
    <link rel="stylesheet" href="/css/components/buttons.css" />
    <link rel="stylesheet" href="/css/components/customerDashboard.css" />
    <link rel="stylesheet" href="/css/components/sucesssError.css" />





    <link rel="stylesheet" th:href="@{/css/booking.css}">



    <link rel="stylesheet" href="/css/main.css" />
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
<style>
    header.header {
    display: flex;
    align-items: center !important;
    justify-content: center !important;
    }
</style>

</head>
<body>
<header class="header">
    <nav class="nav">
        <a href="/home" class="nav-logo">
            <i class="fas fa-gas-pump me-2"></i>
            <!-- Fuel pump icon -->
            Bharat Gas
        </a>
        <!-- Hamburger Menu -->
        <button class="hamburger" id="hamburger-menu">&#9776;</button>

        <ul class="nav-list-hamburger" id="nav-list">
            <li class="nav-item">
                <a href="/customer/dashboard" class="nav-link"
                ><i class="bi bi-house-fill"></i> Dashboard</a
                >
            </li>
<!--            <li class="nav-item">-->
<!--                <form th:action="@{/submit-booking}" th:object="${customer}" method="POST" enctype="multipart/form-data">-->
<!--                    <input type="hidden" th:field="*{consumerId}" />-->
<!--                    <a th:href="@{/history?consumerId={consumerId}(consumerId=${customer.consumerId})}" class="bookin">My Bookings  </a>-->
<!--                </form>-->
<!--            </li>-->
            <li class="nav-item">
                <a href="/logout" class="nav-link"
                ><i class="bi bi-box-arrow-right"></i> Logout</a
                >
            </li>
    </nav>
</header>

<section class="booking-form">
    <div>
        <img th:src="@{/images/user2.png}" alt="Customer Image" class="custImg">
    </div>
    <div>
        <p th:if="${sorry}" th:text="${sorry}" id="alertMessage"></p>
    </div>
    <div>
        <p th:if="${permit}" th:text="${permit}" id="alertMessages"></p>
    </div>

    <form th:action="@{/submit-booking}" th:object="${bookingPageView}" method="POST" enctype="multipart/form-data">
        <div class="form-section">
            <h3>Customer Information</h3>
            <div class="form-fields-container">
                <div class="form-field">
                    <label>CustomerId:</label>
                    <input type="text" th:field="*{consumerId}" readonly />
                </div>
                <div class="form-field">
                    <label>Name:</label>
                    <input type="text" th:field="*{consumerName}" readonly />
                </div>
                <div class="form-field">
                    <label>Address:</label>
                    <textarea th:field="*{address}" rows="3" readonly></textarea>
                </div>
                <div class="form-field">
                    <label>Phone Number:</label>
                    <input type="tel" th:field="*{contactNo}" readonly />
                </div>
                <div class="form-field">
                    <label>Email:</label>
                    <input type="email" th:field="*{email}" readonly />
                </div>
                <div class="form-field">
                    <label>Cylinder Type:</label>
                    <input type="text" th:field="*{connType}" readonly />
                </div>
            </div>
        </div>

        <div class="form-section">
            <h3>Booking Details</h3>
            <div class="form-fields-container">
                <div class="form-field">
                    <label>Time Slot:</label>
                    <select th:field="*{timeSlot}" required>
                        <option value="" disabled selected>Select Time Slot</option>
                        <option value="9 AM to 3 PM">9 AM to 3 PM</option>
                        <option value="3 PM to 9 PM">3 PM to 9 PM</option>
                    </select>
                </div>

<!--                <div class="form-field">-->
<!--                    <label>Booking Date:</label>-->
<!--                    <input type="date" id="check" th:field="*{bookingDate}" onchange="checkDate()" required />-->

<!--                </div>-->
<!--                &lt;!&ndash;                    <select th:field="*{timeSlot}" required>&ndash;&gt;-->
<!--&lt;!&ndash;                        <option value="" disabled selected>Select Time Slot</option>&ndash;&gt;-->
<!--&lt;!&ndash;                        <option value="9 AM to 3 PM">9 AM to 3 PM</option>&ndash;&gt;-->
<!--&lt;!&ndash;                        <option value="3 PM to 9 PM">3 PM to 9 PM</option>&ndash;&gt;-->
<!--&lt;!&ndash;                    </select>&ndash;&gt;-->
<!--                </div>-->



                <div class="form-field">
                    <label>Delivery Option:</label>
                    <select th:field="*{deliveryOption}" required>
                        <option value="" disabled selected>Select Delivery Option</option>
                        <option value="Normal">Normal Delivery</option>
                        <option value="Express">Express Delivery</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h3>Payment Options</h3>
            <div class="form-fields-container">
                <div class="form-field" style="display: flex; gap: 1rem; align-items: center;">
                    <label>
                        <input type="radio" th:field="*{paymentOption}" value="Cash On Delivery" required />
                        Cash On Delivery
                    </label>
                    <label>
                        <input type="radio" th:field="*{paymentOption}" value="Online UPI" required />
                        Online UPI
                    </label>
                    <label>
                        <input type="radio" th:field="*{paymentOption}" value="Credit/Debit Card" required />
                        Credit/Debit Card
                    </label>
                </div>
            </div>
        </div>

        <div class="form-field">
            <button type="submit">Confirm Booking</button>
<!--            <a th:href="@{/history?consumerId=${bookingPageView.consumerId}}" th:text="'See booking history'"></a>-->
        </div>
    </form>


<!--    <form th:action="@{/submit-booking}" th:object="${bookingPageView}" method="POST" enctype="multipart/form-data">-->
<!--        <input type="hidden" th:field="*{consumerId}" />-->
<!--        <a th:href="@{/history?consumerId={consumerId}(consumerId=${bookingPageView.consumerId})}">View Booking History</a>-->
<!--    </form>-->

</section>
<!-- Hidden fields to store messages from backend -->
<input type="hidden" id="surchargeMessage" th:value="${surchargeMessage}">
<input type="hidden" id="permitMessage" th:value="${permit}">





<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Show alert message if available
        var alertMessage = document.getElementById("alertMessage");
        if (alertMessage && alertMessage.innerText.trim() !== "") {
            alert(alertMessage.innerText);
        }
    });

    document.addEventListener("DOMContentLoaded", function () {
        // Show alert message if available
        var alertMessage = document.getElementById("alertMessages");
        if (alertMessage && alertMessage.innerText.trim() !== "") {
            alert(alertMessage.innerText);
        }
    });

    // Function to check the booking date
    function checkDate() {
        const today = new Date(); // Get today's date
        today.setHours(0, 0, 0, 0); // Set time to midnight for accurate comparison

        const bookingDateInput = document.getElementById("check");
        const bookingDate = new Date(bookingDateInput.value);

        if (bookingDate < today) {
            alert("Booking date must be today or in the future.");
            bookingDateInput.value = ""; // Clear invalid date
        }
    }
</script>
<script src="/js/booking.js"></script>
<script src="/js/hamburgerMenu.js"></script>
</body>
</html>
